{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import axios from'axios';import'./App.css';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const API_BASE=process.env.REACT_APP_API_BASE||'http://localhost:3001';const LEVEL_OPTIONS=[{id:'beginner',label:'Beginner (Learning)'},{id:'intermediate',label:'Intermediate'},{id:'advanced',label:'Advanced'},{id:'professional',label:'Professional'}];const LEVEL_DESCRIPTIONS={beginner:'Friendly, explanatory tone with speech cues.',intermediate:'Balanced detail with targeted rebuttals.',advanced:'Sophisticated nuance and deeper weighing.',professional:'Tournament-ready precision and impact.'};const[motion,setMotion]=useState('');const[side,setSide]=useState('auto');const[timeLimit,setTimeLimit]=useState(5);// in minutes\nconst[skillLevel,setSkillLevel]=useState('professional');const[turns,setTurns]=useState([]);const[recording,setRecording]=useState(false);const[audioBlob,setAudioBlob]=useState(null);const[aiSpeaking,setAiSpeaking]=useState(false);const[assignedSide,setAssignedSide]=useState(null);const[currentSpeaker,setCurrentSpeaker]=useState(null);const[debateStarted,setDebateStarted]=useState(false);const[recordingTime,setRecordingTime]=useState(0);const[currentWordIndex,setCurrentWordIndex]=useState(0);const[isAnimating,setIsAnimating]=useState(false);const[debateState,setDebateState]=useState('opening');// opening, rebuttal, counterargument, closing\nconst[currentRound,setCurrentRound]=useState(1);const[ttsWarning,setTtsWarning]=useState('');const recorderRef=useRef(null);const timerRef=useRef(null);const audioUrlsRef=useRef([]);const activeAudioRef=useRef(null);const utteranceRef=useRef(null);const animationRef=useRef(null);const HIGHLIGHT_STRETCH=1.2;const stripPauseTokens=function(){let text=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return text.replace(/\\[\\[PAUSE_LONG\\]\\]/g,' ').replace(/\\[\\[PAUSE_SHORT\\]\\]/g,' ').replace(/\\s{2,}/g,' ').trim();};const expandPauseTokensForSpeech=function(){let text=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return text.replace(/\\[\\[PAUSE_LONG\\]\\]/g,'. . . ').replace(/\\[\\[PAUSE_SHORT\\]\\]/g,', ').replace(/\\s{2,}/g,' ').trim();};const resetLocalSession=()=>{if(timerRef.current){clearInterval(timerRef.current);timerRef.current=null;}if(activeAudioRef.current){activeAudioRef.current.pause();activeAudioRef.current=null;}window.speechSynthesis.cancel();audioUrlsRef.current.forEach(url=>URL.revokeObjectURL(url));audioUrlsRef.current=[];setTurns([]);setRecording(false);setRecordingTime(0);setAiSpeaking(false);setCurrentSpeaker(null);setCurrentRound(1);setDebateState('opening');};useEffect(()=>{return()=>{if(timerRef.current){clearInterval(timerRef.current);}if(activeAudioRef.current){activeAudioRef.current.pause();}window.speechSynthesis.cancel();audioUrlsRef.current.forEach(url=>URL.revokeObjectURL(url));audioUrlsRef.current=[];};},[]);const advanceDebatePhase=()=>{setDebateState(prev=>{switch(prev){case'opening':return'rebuttal';case'rebuttal':return'counterargument';case'counterargument':return'closing';default:return'closing';}});setCurrentRound(prev=>prev+1);};const clearWordAnimation=()=>{if(animationRef.current){clearInterval(animationRef.current);animationRef.current=null;}setIsAnimating(false);setCurrentWordIndex(0);};const startWordAnimation=function(text){let durationMs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4000;clearWordAnimation();const sanitized=stripPauseTokens(text);const words=sanitized.split(' ').filter(Boolean);if(!words.length){return;}setIsAnimating(true);setCurrentWordIndex(0);const interval=Math.max(durationMs/words.length,80);let index=0;animationRef.current=setInterval(()=>{index+=1;setCurrentWordIndex(current=>index<words.length?index:current);if(index>=words.length){clearWordAnimation();}},interval);};const startDebate=async()=>{if(!motion.trim()){alert('Please enter a debate motion before starting.');return;}try{resetLocalSession();const response=await axios.post(\"\".concat(API_BASE,\"/start\"),{motion:motion.trim(),side,timeLimit,skillLevel});setAssignedSide(response.data.assignedSide);setDebateStarted(true);setDebateState('opening');setCurrentRound(1);if(response.data.aiText){const aiData=JSON.parse(response.data.aiText);setTurns([{speaker:'ai',text:aiData.text,data:aiData,round:1,state:'opening'}]);setCurrentSpeaker('ai');await speak(aiData.text);}else{setCurrentSpeaker('user');}}catch(error){var _error$response,_error$response$data;console.error('Start debate error:',error);alert('Failed to start debate: '+(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||error.message));}};const record=async()=>{if(recording||aiSpeaking||currentSpeaker!=='user'){return;}if(activeAudioRef.current){activeAudioRef.current.pause();activeAudioRef.current=null;}window.speechSynthesis.cancel();clearWordAnimation();setAiSpeaking(false);try{const stream=await navigator.mediaDevices.getUserMedia({audio:true});const mediaRecorder=new MediaRecorder(stream,{mimeType:'audio/webm'});recorderRef.current=mediaRecorder;const chunks=[];mediaRecorder.ondataavailable=event=>{if(event.data&&event.data.size>0){chunks.push(event.data);}};mediaRecorder.onstop=()=>{stream.getTracks().forEach(track=>track.stop());if(timerRef.current){clearInterval(timerRef.current);timerRef.current=null;}setRecording(false);setRecordingTime(0);recorderRef.current=null;if(chunks.length>0){const blob=new Blob(chunks,{type:'audio/webm'});setAudioBlob(blob);}};mediaRecorder.start();setRecording(true);setRecordingTime(0);timerRef.current=setInterval(()=>{setRecordingTime(prev=>{const nextTime=prev+1;if(nextTime>=timeLimit*60){stopRecord();alert('Time limit reached! Recording stopped.');return prev;}return nextTime;});},1000);}catch(error){console.error('Microphone access error:',error);alert('Could not access microphone. Please allow microphone permissions and try again.');}};const stopRecord=()=>{const recorder=recorderRef.current;if(!recorder||recorder.state==='inactive'){return;}recorder.stop();if(timerRef.current){clearInterval(timerRef.current);timerRef.current=null;}};useEffect(()=>{if(!audioBlob){return;}processRecording(audioBlob);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[audioBlob]);const processRecording=async blob=>{const userBlob=blob;setAudioBlob(null);setCurrentSpeaker('ai');try{const fileName=\"user-turn-\".concat(Date.now(),\".webm\");const formData=new FormData();formData.append('file',userBlob,fileName);const{data}=await axios.post(\"\".concat(API_BASE,\"/transcribe\"),formData,{headers:{'Content-Type':'multipart/form-data'}});const userText=(data.transcript||'').trim()||'[No speech detected]';const objectUrl=URL.createObjectURL(userBlob);audioUrlsRef.current.push(objectUrl);const timestamp=new Date().toISOString();const userTurn={speaker:'user',text:userText,audioUrl:objectUrl,round:currentRound,state:debateState,timestamp};setTurns(prev=>[...prev,userTurn]);const aiResponse=await axios.post(\"\".concat(API_BASE,\"/reply\"),{userText,round:currentRound,state:debateState,transcript:userText,skillLevel});const aiData=JSON.parse(aiResponse.data.text);const aiTurn={speaker:'ai',text:aiData.text,data:aiData,round:currentRound,state:debateState,timestamp:new Date().toISOString()};setTurns(prev=>[...prev,aiTurn]);await speak(aiData.text);advanceDebatePhase();}catch(error){console.error('Recording or transcription failed:',error);alert('Recording or transcription failed. Please try again.');setCurrentSpeaker('user');}};const playRemoteAudio=(url,text)=>new Promise(resolve=>{clearWordAnimation();const audio=new Audio(\"\".concat(url,\"?v=\").concat(Date.now()));activeAudioRef.current=audio;audio.onloadedmetadata=()=>{const duration=(audio.duration||5)*1000*HIGHLIGHT_STRETCH;startWordAnimation(stripPauseTokens(text),duration);};audio.onerror=()=>{activeAudioRef.current=null;resolve();};audio.onended=()=>{activeAudioRef.current=null;resolve();};audio.play().catch(()=>{activeAudioRef.current=null;resolve();});});const speakWithBrowserTts=text=>new Promise(resolve=>{const cleanTimingText=stripPauseTokens(text);if(!text||!cleanTimingText){resolve();return;}if(!window.speechSynthesis){resolve();return;}window.speechSynthesis.cancel();clearWordAnimation();const vocalText=expandPauseTokensForSpeech(text);const utterance=new SpeechSynthesisUtterance(vocalText);utterance.rate=1.28;utterance.pitch=1.05;utterance.volume=0.9;const voices=window.speechSynthesis.getVoices();const preferredVoice=voices.find(voice=>voice.lang.startsWith('en'));if(preferredVoice){utterance.voice=preferredVoice;}utterance.onend=()=>{utteranceRef.current=null;resolve();};utterance.onerror=()=>{utteranceRef.current=null;resolve();};utteranceRef.current=utterance;const estimatedDuration=Math.max(cleanTimingText.split(' ').length*420,1400)*HIGHLIGHT_STRETCH;startWordAnimation(cleanTimingText,estimatedDuration);window.speechSynthesis.speak(utterance);});const speak=async payload=>{const speechText=typeof payload==='string'?payload:(payload===null||payload===void 0?void 0:payload.text)||'';if(!speechText){return;}setAiSpeaking(true);setCurrentSpeaker('ai');setCurrentWordIndex(0);setTtsWarning('');try{const{data}=await axios.post(\"\".concat(API_BASE,\"/speak\"),{text:speechText});const playbackText=(data.textForSpeech||data.text||speechText).trim();setTtsWarning(data.warning||'');if(data.type==='file'&&data.audioUrl){await playRemoteAudio(\"\".concat(API_BASE).concat(data.audioUrl),playbackText);}else{await speakWithBrowserTts(playbackText);}}catch(error){console.error('TTS failed:',error);setTtsWarning('');await speakWithBrowserTts(speechText);}finally{clearWordAnimation();setAiSpeaking(false);setCurrentSpeaker('user');}};const renderAnimatedText=(text,isActive)=>{const clean=stripPauseTokens(text);if(!isActive||!isAnimating){return clean||text||'';}if(!clean)return'';const words=clean.split(' ');return words.map((word,index)=>/*#__PURE__*/_jsxs(\"span\",{className:index===currentWordIndex?'highlight':'word',children:[word,' ']},\"\".concat(word,\"-\").concat(index)));};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"AI Debate Partner\"}),ttsWarning&&/*#__PURE__*/_jsx(\"div\",{className:\"tts-warning\",role:\"status\",\"aria-live\":\"polite\",children:ttsWarning}),/*#__PURE__*/_jsxs(\"div\",{className:\"setup-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Debate Motion\"}),/*#__PURE__*/_jsx(\"input\",{value:motion,onChange:e=>setMotion(e.target.value),placeholder:\"Enter your debate topic...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Your Side\"}),/*#__PURE__*/_jsxs(\"select\",{value:side,onChange:e=>setSide(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"auto\",children:\"Auto Assign Side\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pro\",children:\"Proposition\"}),/*#__PURE__*/_jsx(\"option\",{value:\"opp\",children:\"Opposition\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Speech Time Limit (minutes)\"}),/*#__PURE__*/_jsxs(\"select\",{value:timeLimit,onChange:e=>setTimeLimit(parseInt(e.target.value)),children:[/*#__PURE__*/_jsx(\"option\",{value:3,children:\"3 minutes\"}),/*#__PURE__*/_jsx(\"option\",{value:5,children:\"5 minutes\"}),/*#__PURE__*/_jsx(\"option\",{value:7,children:\"7 minutes\"}),/*#__PURE__*/_jsx(\"option\",{value:10,children:\"10 minutes\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"AI Skill Level\"}),/*#__PURE__*/_jsx(\"select\",{value:skillLevel,onChange:e=>setSkillLevel(e.target.value),children:LEVEL_OPTIONS.map(level=>/*#__PURE__*/_jsx(\"option\",{value:level.id,children:level.label},level.id))}),/*#__PURE__*/_jsx(\"p\",{className:\"level-description\",children:LEVEL_DESCRIPTIONS[skillLevel]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"start-button\",onClick:startDebate,children:\"Start Debate\"})]})]}),debateStarted&&/*#__PURE__*/_jsxs(\"div\",{className:\"debate-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Motion\"}),/*#__PURE__*/_jsx(\"p\",{children:motion})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your Side\"}),/*#__PURE__*/_jsx(\"p\",{children:side==='auto'?assignedSide==='pro'?'Proposition':'Opposition':side==='pro'?'Proposition':'Opposition'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Speech Time Limit\"}),/*#__PURE__*/_jsxs(\"p\",{children:[timeLimit,\" minutes\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chat\",children:[turns.map((turn,i)=>{const isLatestAI=turn.speaker==='ai'&&i===turns.length-1;return/*#__PURE__*/_jsxs(\"div\",{className:\"turn \".concat(turn.speaker),children:[/*#__PURE__*/_jsx(\"div\",{className:\"speaker-indicator\",children:turn.speaker==='ai'?'AI':'You'}),/*#__PURE__*/_jsx(\"p\",{className:isLatestAI&&isAnimating?'animated-text':'',children:renderAnimatedText(turn.text,isLatestAI)}),turn.speaker==='user'&&turn.audioUrl&&/*#__PURE__*/_jsx(\"audio\",{controls:true,src:turn.audioUrl,\"aria-label\":\"Your recorded reply\"})]},\"\".concat(turn.speaker,\"-\").concat(i));}),aiSpeaking&&/*#__PURE__*/_jsx(\"div\",{className:\"ai-speaking\",children:\"AI is speaking...\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"controls\",children:[currentSpeaker==='user'&&!aiSpeaking&&!debateStarted&&/*#__PURE__*/_jsx(\"div\",{className:\"instruction-message\",children:\"Press the \\\"Record Response\\\" button to start recording your speech.\"}),currentSpeaker==='user'&&!aiSpeaking&&debateStarted&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"turn-indicator\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Your Turn - \",debateState.charAt(0).toUpperCase()+debateState.slice(1),\" Speech\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Round \",currentRound,\" | Time Limit: \",timeLimit,\" minutes\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"record-button \".concat(recording?'recording':''),onClick:record,disabled:recording,children:recording?/*#__PURE__*/_jsxs(_Fragment,{children:[\"Recording (\",Math.floor(recordingTime/60),\":\",(recordingTime%60).toString().padStart(2,'0'),\")\",/*#__PURE__*/_jsxs(\"div\",{className:\"audio-visualizer\",\"aria-hidden\":\"true\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"audio-bar\"}),/*#__PURE__*/_jsx(\"div\",{className:\"audio-bar\"}),/*#__PURE__*/_jsx(\"div\",{className:\"audio-bar\"}),/*#__PURE__*/_jsx(\"div\",{className:\"audio-bar\"}),/*#__PURE__*/_jsx(\"div\",{className:\"audio-bar\"})]})]}):'Record Response'}),/*#__PURE__*/_jsx(\"button\",{className:\"stop-button\",onClick:stopRecord,disabled:!recording,children:\"Stop & Submit\"})]}),currentSpeaker==='ai'&&/*#__PURE__*/_jsx(\"div\",{className:\"waiting-message\",children:\"AI is preparing its response...\"}),aiSpeaking&&/*#__PURE__*/_jsx(\"div\",{className:\"waiting-message\",children:\"AI is speaking...\"})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","App","API_BASE","process","env","REACT_APP_API_BASE","LEVEL_OPTIONS","id","label","LEVEL_DESCRIPTIONS","beginner","intermediate","advanced","professional","motion","setMotion","side","setSide","timeLimit","setTimeLimit","skillLevel","setSkillLevel","turns","setTurns","recording","setRecording","audioBlob","setAudioBlob","aiSpeaking","setAiSpeaking","assignedSide","setAssignedSide","currentSpeaker","setCurrentSpeaker","debateStarted","setDebateStarted","recordingTime","setRecordingTime","currentWordIndex","setCurrentWordIndex","isAnimating","setIsAnimating","debateState","setDebateState","currentRound","setCurrentRound","ttsWarning","setTtsWarning","recorderRef","timerRef","audioUrlsRef","activeAudioRef","utteranceRef","animationRef","HIGHLIGHT_STRETCH","stripPauseTokens","text","arguments","length","undefined","replace","trim","expandPauseTokensForSpeech","resetLocalSession","current","clearInterval","pause","window","speechSynthesis","cancel","forEach","url","URL","revokeObjectURL","advanceDebatePhase","prev","clearWordAnimation","startWordAnimation","durationMs","sanitized","words","split","filter","Boolean","interval","Math","max","index","setInterval","startDebate","alert","response","post","concat","data","aiText","aiData","JSON","parse","speaker","round","state","speak","error","_error$response","_error$response$data","console","message","record","stream","navigator","mediaDevices","getUserMedia","audio","mediaRecorder","MediaRecorder","mimeType","chunks","ondataavailable","event","size","push","onstop","getTracks","track","stop","blob","Blob","type","start","nextTime","stopRecord","recorder","processRecording","userBlob","fileName","Date","now","formData","FormData","append","headers","userText","transcript","objectUrl","createObjectURL","timestamp","toISOString","userTurn","audioUrl","aiResponse","aiTurn","playRemoteAudio","Promise","resolve","Audio","onloadedmetadata","duration","onerror","onended","play","catch","speakWithBrowserTts","cleanTimingText","vocalText","utterance","SpeechSynthesisUtterance","rate","pitch","volume","voices","getVoices","preferredVoice","find","voice","lang","startsWith","onend","estimatedDuration","payload","speechText","playbackText","textForSpeech","warning","renderAnimatedText","isActive","clean","map","word","className","children","role","value","onChange","e","target","placeholder","parseInt","level","onClick","turn","i","isLatestAI","controls","src","charAt","toUpperCase","slice","disabled","floor","toString","padStart"],"sources":["C:/Users/DEEPAK AGARWAL/Downloads/Claude Code Trial/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport './App.css';\r\n\r\nfunction App() {\n  const API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:3001';\n\n  const LEVEL_OPTIONS = [\n    { id: 'beginner', label: 'Beginner (Learning)' },\n    { id: 'intermediate', label: 'Intermediate' },\n    { id: 'advanced', label: 'Advanced' },\n    { id: 'professional', label: 'Professional' }\n  ];\n\n  const LEVEL_DESCRIPTIONS = {\n    beginner: 'Friendly, explanatory tone with speech cues.',\n    intermediate: 'Balanced detail with targeted rebuttals.',\n    advanced: 'Sophisticated nuance and deeper weighing.',\n    professional: 'Tournament-ready precision and impact.'\n  };\n\n  const [motion, setMotion] = useState('');\n  const [side, setSide] = useState('auto');\n  const [timeLimit, setTimeLimit] = useState(5); // in minutes\n  const [skillLevel, setSkillLevel] = useState('professional');\n  const [turns, setTurns] = useState([]);\n  const [recording, setRecording] = useState(false);\n  const [audioBlob, setAudioBlob] = useState(null);\n  const [aiSpeaking, setAiSpeaking] = useState(false);\n  const [assignedSide, setAssignedSide] = useState(null);\n  const [currentSpeaker, setCurrentSpeaker] = useState(null);\n  const [debateStarted, setDebateStarted] = useState(false);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [currentWordIndex, setCurrentWordIndex] = useState(0);\n  const [isAnimating, setIsAnimating] = useState(false);\n  const [debateState, setDebateState] = useState('opening'); // opening, rebuttal, counterargument, closing\n  const [currentRound, setCurrentRound] = useState(1);\n  const [ttsWarning, setTtsWarning] = useState('');\n\r\n  const recorderRef = useRef(null);\r\n  const timerRef = useRef(null);\r\n  const audioUrlsRef = useRef([]);\r\n  const activeAudioRef = useRef(null);\r\n  const utteranceRef = useRef(null);\r\n  const animationRef = useRef(null);\r\n\r\n  const HIGHLIGHT_STRETCH = 1.2;\n\n  const stripPauseTokens = (text = '') =>\n    text\r\n      .replace(/\\[\\[PAUSE_LONG\\]\\]/g, ' ')\r\n      .replace(/\\[\\[PAUSE_SHORT\\]\\]/g, ' ')\r\n      .replace(/\\s{2,}/g, ' ')\r\n      .trim();\r\n\r\n  const expandPauseTokensForSpeech = (text = '') =>\r\n    text\r\n      .replace(/\\[\\[PAUSE_LONG\\]\\]/g, '. . . ')\r\n      .replace(/\\[\\[PAUSE_SHORT\\]\\]/g, ', ')\r\n      .replace(/\\s{2,}/g, ' ')\r\n      .trim();\r\n\r\n  const resetLocalSession = () => {\r\n    if (timerRef.current) {\r\n      clearInterval(timerRef.current);\r\n      timerRef.current = null;\r\n    }\r\n    if (activeAudioRef.current) {\r\n      activeAudioRef.current.pause();\r\n      activeAudioRef.current = null;\r\n    }\r\n    window.speechSynthesis.cancel();\r\n    audioUrlsRef.current.forEach(url => URL.revokeObjectURL(url));\r\n    audioUrlsRef.current = [];\r\n    setTurns([]);\r\n    setRecording(false);\r\n    setRecordingTime(0);\r\n    setAiSpeaking(false);\r\n    setCurrentSpeaker(null);\r\n    setCurrentRound(1);\r\n    setDebateState('opening');\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (timerRef.current) {\r\n        clearInterval(timerRef.current);\r\n      }\r\n      if (activeAudioRef.current) {\r\n        activeAudioRef.current.pause();\r\n      }\r\n      window.speechSynthesis.cancel();\r\n      audioUrlsRef.current.forEach(url => URL.revokeObjectURL(url));\r\n      audioUrlsRef.current = [];\r\n    };\r\n  }, []);\r\n\r\n  const advanceDebatePhase = () => {\r\n    setDebateState(prev => {\r\n      switch (prev) {\r\n        case 'opening':\r\n          return 'rebuttal';\r\n        case 'rebuttal':\r\n          return 'counterargument';\r\n        case 'counterargument':\r\n          return 'closing';\r\n        default:\r\n          return 'closing';\r\n      }\r\n    });\r\n    setCurrentRound(prev => prev + 1);\r\n  };\r\n\r\n  const clearWordAnimation = () => {\r\n    if (animationRef.current) {\r\n      clearInterval(animationRef.current);\r\n      animationRef.current = null;\r\n    }\r\n    setIsAnimating(false);\r\n    setCurrentWordIndex(0);\r\n  };\r\n\r\n  const startWordAnimation = (text, durationMs = 4000) => {\r\n    clearWordAnimation();\r\n    const sanitized = stripPauseTokens(text);\r\n    const words = sanitized.split(' ').filter(Boolean);\r\n    if (!words.length) {\r\n      return;\r\n    }\r\n    setIsAnimating(true);\r\n    setCurrentWordIndex(0);\r\n    const interval = Math.max(durationMs / words.length, 80);\r\n    let index = 0;\r\n    animationRef.current = setInterval(() => {\r\n      index += 1;\r\n      setCurrentWordIndex(current => (index < words.length ? index : current));\r\n      if (index >= words.length) {\r\n        clearWordAnimation();\r\n      }\r\n    }, interval);\r\n  };\r\n\r\n  const startDebate = async () => {\r\n    if (!motion.trim()) {\r\n      alert('Please enter a debate motion before starting.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      resetLocalSession();\r\n      const response = await axios.post(`${API_BASE}/start`, {\n        motion: motion.trim(),\n        side,\n        timeLimit,\n        skillLevel\n      });\n      setAssignedSide(response.data.assignedSide);\r\n      setDebateStarted(true);\r\n      setDebateState('opening');\r\n      setCurrentRound(1);\r\n\r\n      if (response.data.aiText) {\r\n        const aiData = JSON.parse(response.data.aiText);\r\n        setTurns([{ speaker: 'ai', text: aiData.text, data: aiData, round: 1, state: 'opening' }]);\r\n        setCurrentSpeaker('ai');\r\n        await speak(aiData.text);\r\n      } else {\r\n        setCurrentSpeaker('user');\r\n      }\r\n    } catch (error) {\r\n      console.error('Start debate error:', error);\r\n      alert('Failed to start debate: ' + (error.response?.data?.error || error.message));\r\n    }\r\n  };\r\n\r\n  const record = async () => {\r\n    if (recording || aiSpeaking || currentSpeaker !== 'user') {\r\n      return;\r\n    }\r\n\r\n    if (activeAudioRef.current) {\r\n      activeAudioRef.current.pause();\r\n      activeAudioRef.current = null;\r\n    }\r\n    window.speechSynthesis.cancel();\r\n    clearWordAnimation();\r\n    setAiSpeaking(false);\r\n\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      const mediaRecorder = new MediaRecorder(stream, { mimeType: 'audio/webm' });\r\n      recorderRef.current = mediaRecorder;\r\n      const chunks = [];\r\n\r\n      mediaRecorder.ondataavailable = event => {\r\n        if (event.data && event.data.size > 0) {\r\n          chunks.push(event.data);\r\n        }\r\n      };\r\n\r\n      mediaRecorder.onstop = () => {\r\n        stream.getTracks().forEach(track => track.stop());\r\n        if (timerRef.current) {\r\n          clearInterval(timerRef.current);\r\n          timerRef.current = null;\r\n        }\r\n        setRecording(false);\r\n        setRecordingTime(0);\r\n        recorderRef.current = null;\r\n        if (chunks.length > 0) {\r\n          const blob = new Blob(chunks, { type: 'audio/webm' });\r\n          setAudioBlob(blob);\r\n        }\r\n      };\r\n\r\n      mediaRecorder.start();\r\n      setRecording(true);\r\n      setRecordingTime(0);\r\n\r\n      timerRef.current = setInterval(() => {\r\n        setRecordingTime(prev => {\r\n          const nextTime = prev + 1;\r\n          if (nextTime >= timeLimit * 60) {\r\n            stopRecord();\r\n            alert('Time limit reached! Recording stopped.');\r\n            return prev;\r\n          }\r\n          return nextTime;\r\n        });\r\n      }, 1000);\r\n    } catch (error) {\r\n      console.error('Microphone access error:', error);\r\n      alert('Could not access microphone. Please allow microphone permissions and try again.');\r\n    }\r\n  };\r\n\r\n  const stopRecord = () => {\r\n    const recorder = recorderRef.current;\r\n    if (!recorder || recorder.state === 'inactive') {\r\n      return;\r\n    }\r\n    recorder.stop();\r\n    if (timerRef.current) {\r\n      clearInterval(timerRef.current);\r\n      timerRef.current = null;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!audioBlob) {\r\n      return;\r\n    }\r\n    processRecording(audioBlob);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [audioBlob]);\r\n\r\n  const processRecording = async blob => {\r\n    const userBlob = blob;\r\n    setAudioBlob(null);\r\n    setCurrentSpeaker('ai');\r\n\r\n    try {\r\n      const fileName = `user-turn-${Date.now()}.webm`;\r\n      const formData = new FormData();\r\n      formData.append('file', userBlob, fileName);\r\n      const { data } = await axios.post(`${API_BASE}/transcribe`, formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' }\r\n      });\r\n\r\n      const userText = (data.transcript || '').trim() || '[No speech detected]';\r\n      const objectUrl = URL.createObjectURL(userBlob);\r\n      audioUrlsRef.current.push(objectUrl);\r\n\r\n      const timestamp = new Date().toISOString();\r\n      const userTurn = {\r\n        speaker: 'user',\r\n        text: userText,\r\n        audioUrl: objectUrl,\r\n        round: currentRound,\r\n        state: debateState,\r\n        timestamp\r\n      };\r\n\r\n      setTurns(prev => [...prev, userTurn]);\r\n\r\n      const aiResponse = await axios.post(`${API_BASE}/reply`, {\n        userText,\n        round: currentRound,\n        state: debateState,\n        transcript: userText,\n        skillLevel\n      });\n\r\n      const aiData = JSON.parse(aiResponse.data.text);\r\n      const aiTurn = {\r\n        speaker: 'ai',\r\n        text: aiData.text,\r\n        data: aiData,\r\n        round: currentRound,\r\n        state: debateState,\r\n        timestamp: new Date().toISOString()\r\n      };\r\n      setTurns(prev => [...prev, aiTurn]);\r\n      await speak(aiData.text);\r\n      advanceDebatePhase();\r\n    } catch (error) {\r\n      console.error('Recording or transcription failed:', error);\r\n      alert('Recording or transcription failed. Please try again.');\r\n      setCurrentSpeaker('user');\r\n    }\r\n  };\r\n\r\n  const playRemoteAudio = (url, text) =>\r\n    new Promise(resolve => {\r\n      clearWordAnimation();\r\n      const audio = new Audio(`${url}?v=${Date.now()}`);\r\n      activeAudioRef.current = audio;\r\n\r\n      audio.onloadedmetadata = () => {\r\n        const duration = (audio.duration || 5) * 1000 * HIGHLIGHT_STRETCH;\r\n        startWordAnimation(stripPauseTokens(text), duration);\r\n      };\r\n\r\n      audio.onerror = () => {\r\n        activeAudioRef.current = null;\r\n        resolve();\r\n      };\r\n\r\n      audio.onended = () => {\r\n        activeAudioRef.current = null;\r\n        resolve();\r\n      };\r\n\r\n      audio.play().catch(() => {\r\n        activeAudioRef.current = null;\r\n        resolve();\r\n      });\r\n    });\r\n\r\n  const speakWithBrowserTts = text =>\r\n    new Promise(resolve => {\r\n      const cleanTimingText = stripPauseTokens(text);\r\n      if (!text || !cleanTimingText) {\r\n        resolve();\r\n        return;\r\n      }\r\n      if (!window.speechSynthesis) {\r\n        resolve();\r\n        return;\r\n      }\r\n      window.speechSynthesis.cancel();\r\n      clearWordAnimation();\r\n      const vocalText = expandPauseTokensForSpeech(text);\r\n      const utterance = new SpeechSynthesisUtterance(vocalText);\r\n      utterance.rate = 1.28;\r\n      utterance.pitch = 1.05;\r\n      utterance.volume = 0.9;\r\n      const voices = window.speechSynthesis.getVoices();\r\n      const preferredVoice = voices.find(voice => voice.lang.startsWith('en'));\r\n      if (preferredVoice) {\r\n        utterance.voice = preferredVoice;\r\n      }\r\n      utterance.onend = () => {\r\n        utteranceRef.current = null;\r\n        resolve();\r\n      };\r\n      utterance.onerror = () => {\r\n        utteranceRef.current = null;\r\n        resolve();\r\n      };\r\n      utteranceRef.current = utterance;\r\n      const estimatedDuration = Math.max(cleanTimingText.split(' ').length * 420, 1400) * HIGHLIGHT_STRETCH;\r\n      startWordAnimation(cleanTimingText, estimatedDuration);\r\n      window.speechSynthesis.speak(utterance);\r\n    });\r\n\r\n  const speak = async payload => {\n    const speechText = typeof payload === 'string' ? payload : payload?.text || '';\n    if (!speechText) {\n      return;\n    }\n\n    setAiSpeaking(true);\n    setCurrentSpeaker('ai');\n    setCurrentWordIndex(0);\n    setTtsWarning('');\n\n    try {\n      const { data } = await axios.post(`${API_BASE}/speak`, { text: speechText });\n      const playbackText = (data.textForSpeech || data.text || speechText).trim();\n      setTtsWarning(data.warning || '');\n      if (data.type === 'file' && data.audioUrl) {\n        await playRemoteAudio(`${API_BASE}${data.audioUrl}`, playbackText);\n      } else {\n        await speakWithBrowserTts(playbackText);\n      }\n    } catch (error) {\n      console.error('TTS failed:', error);\n      setTtsWarning('');\n      await speakWithBrowserTts(speechText);\n    } finally {\n      clearWordAnimation();\n      setAiSpeaking(false);\n      setCurrentSpeaker('user');\n    }\n  };\n\r\n  const renderAnimatedText = (text, isActive) => {\r\n    const clean = stripPauseTokens(text);\r\n    if (!isActive || !isAnimating) {\r\n      return clean || text || '';\r\n    }\r\n    if (!clean) return '';\r\n    const words = clean.split(' ');\r\n    return words.map((word, index) => (\r\n      <span\r\n        key={`${word}-${index}`}\r\n        className={index === currentWordIndex ? 'highlight' : 'word'}\r\n      >\r\n        {word}{' '}\r\n      </span>\r\n    ));\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"header\">\n        <h1>AI Debate Partner</h1>\n        {ttsWarning && (\n          <div className=\"tts-warning\" role=\"status\" aria-live=\"polite\">\n            {ttsWarning}\n          </div>\n        )}\n        <div className=\"setup-panel\">\n          <div className=\"form-group\">\r\n            <label>Debate Motion</label>\r\n            <input\r\n              value={motion}\r\n              onChange={e => setMotion(e.target.value)}\r\n              placeholder=\"Enter your debate topic...\"\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Your Side</label>\r\n            <select value={side} onChange={e => setSide(e.target.value)}>\r\n              <option value=\"auto\">Auto Assign Side</option>\r\n              <option value=\"pro\">Proposition</option>\r\n              <option value=\"opp\">Opposition</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group\">\n            <label>Speech Time Limit (minutes)</label>\n            <select value={timeLimit} onChange={e => setTimeLimit(parseInt(e.target.value))}>\n              <option value={3}>3 minutes</option>\n              <option value={5}>5 minutes</option>\n              <option value={7}>7 minutes</option>\n              <option value={10}>10 minutes</option>\r\n            </select>\n          </div>\n          <div className=\"form-group\">\n            <label>AI Skill Level</label>\n            <select value={skillLevel} onChange={e => setSkillLevel(e.target.value)}>\n              {LEVEL_OPTIONS.map(level => (\n                <option key={level.id} value={level.id}>\n                  {level.label}\n                </option>\n              ))}\n            </select>\n            <p className=\"level-description\">{LEVEL_DESCRIPTIONS[skillLevel]}</p>\n          </div>\n          <button className=\"start-button\" onClick={startDebate}>Start Debate</button>\n        </div>\n      </div>\n\r\n      {debateStarted && (\r\n        <div className=\"debate-info\">\r\n          <div className=\"info-item\">\r\n            <h3>Motion</h3>\r\n            <p>{motion}</p>\r\n          </div>\r\n          <div className=\"info-item\">\r\n            <h3>Your Side</h3>\r\n            <p>{side === 'auto' ? (assignedSide === 'pro' ? 'Proposition' : 'Opposition') : side === 'pro' ? 'Proposition' : 'Opposition'}</p>\r\n          </div>\r\n          <div className=\"info-item\">\r\n            <h3>Speech Time Limit</h3>\r\n            <p>{timeLimit} minutes</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n\r\n\r\n      <div className=\"chat-container\">\r\n        <div className=\"chat\">\r\n          {turns.map((turn, i) => {\r\n            const isLatestAI = turn.speaker === 'ai' && i === turns.length - 1;\r\n            return (\r\n              <div key={`${turn.speaker}-${i}`} className={`turn ${turn.speaker}`}>\r\n                <div className=\"speaker-indicator\">\r\n                  {turn.speaker === 'ai' ? 'AI' : 'You'}\r\n                </div>\r\n                <p className={isLatestAI && isAnimating ? 'animated-text' : ''}>\r\n                  {renderAnimatedText(turn.text, isLatestAI)}\r\n                </p>\r\n                {turn.speaker === 'user' && turn.audioUrl && (\r\n                  <audio controls src={turn.audioUrl} aria-label=\"Your recorded reply\" />\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n          {aiSpeaking && <div className=\"ai-speaking\">AI is speaking...</div>}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"controls\">\r\n        {currentSpeaker === 'user' && !aiSpeaking && !debateStarted && (\r\n          <div className=\"instruction-message\">\r\n            Press the \"Record Response\" button to start recording your speech.\r\n          </div>\r\n        )}\r\n        {currentSpeaker === 'user' && !aiSpeaking && debateStarted && (\r\n          <>\r\n            <div className=\"turn-indicator\">\r\n              <h3>Your Turn - {debateState.charAt(0).toUpperCase() + debateState.slice(1)} Speech</h3>\r\n              <p>Round {currentRound} | Time Limit: {timeLimit} minutes</p>\r\n            </div>\r\n            <button\r\n              className={`record-button ${recording ? 'recording' : ''}`}\r\n              onClick={record}\r\n              disabled={recording}\r\n            >\r\n              {recording ? (\r\n                <>\r\n                  Recording ({Math.floor(recordingTime / 60)}:{(recordingTime % 60).toString().padStart(2, '0')})\r\n                  <div className=\"audio-visualizer\" aria-hidden=\"true\">\r\n                    <div className=\"audio-bar\"></div>\r\n                    <div className=\"audio-bar\"></div>\r\n                    <div className=\"audio-bar\"></div>\r\n                    <div className=\"audio-bar\"></div>\r\n                    <div className=\"audio-bar\"></div>\r\n                  </div>\r\n                </>\r\n              ) : (\r\n                'Record Response'\r\n              )}\r\n            </button>\r\n            <button className=\"stop-button\" onClick={stopRecord} disabled={!recording}>\r\n              Stop &amp; Submit\r\n            </button>\r\n          </>\r\n        )}\r\n        {currentSpeaker === 'ai' && <div className=\"waiting-message\">AI is preparing its response...</div>}\r\n        {aiSpeaking && <div className=\"waiting-message\">AI is speaking...</div>}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}