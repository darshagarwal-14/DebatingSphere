{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DEEPAK AGARWAL\\\\Downloads\\\\Claude Code Trial\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:3001';\n  const [motion, setMotion] = useState('');\n  const [side, setSide] = useState('auto');\n  const [timeLimit, setTimeLimit] = useState(5); // in minutes\n  const [turns, setTurns] = useState([]);\n  const [recording, setRecording] = useState(false);\n  const [audioBlob, setAudioBlob] = useState(null);\n  const [aiSpeaking, setAiSpeaking] = useState(false);\n  const [assignedSide, setAssignedSide] = useState(null);\n  const [currentSpeaker, setCurrentSpeaker] = useState(null);\n  const [debateStarted, setDebateStarted] = useState(false);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [currentWordIndex, setCurrentWordIndex] = useState(0);\n  const [isAnimating, setIsAnimating] = useState(false);\n  const [debateState, setDebateState] = useState('opening'); // opening, rebuttal, counterargument, closing\n  const [currentRound, setCurrentRound] = useState(1);\n  const recorderRef = useRef(null);\n  const timerRef = useRef(null);\n  const audioUrlsRef = useRef([]);\n  const activeAudioRef = useRef(null);\n  const utteranceRef = useRef(null);\n  const animationRef = useRef(null);\n  const HIGHLIGHT_STRETCH = 1.2;\n  const stripPauseTokens = (text = '') => text.replace(/\\[\\[PAUSE_LONG\\]\\]/g, ' ').replace(/\\[\\[PAUSE_SHORT\\]\\]/g, ' ').replace(/\\s{2,}/g, ' ').trim();\n  const expandPauseTokensForSpeech = (text = '') => text.replace(/\\[\\[PAUSE_LONG\\]\\]/g, '. . . ').replace(/\\[\\[PAUSE_SHORT\\]\\]/g, ', ').replace(/\\s{2,}/g, ' ').trim();\n  const resetLocalSession = () => {\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n    if (activeAudioRef.current) {\n      activeAudioRef.current.pause();\n      activeAudioRef.current = null;\n    }\n    window.speechSynthesis.cancel();\n    audioUrlsRef.current.forEach(url => URL.revokeObjectURL(url));\n    audioUrlsRef.current = [];\n    setTurns([]);\n    setRecording(false);\n    setRecordingTime(0);\n    setAiSpeaking(false);\n    setCurrentSpeaker(null);\n    setCurrentRound(1);\n    setDebateState('opening');\n  };\n  useEffect(() => {\n    return () => {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n      if (activeAudioRef.current) {\n        activeAudioRef.current.pause();\n      }\n      window.speechSynthesis.cancel();\n      audioUrlsRef.current.forEach(url => URL.revokeObjectURL(url));\n      audioUrlsRef.current = [];\n    };\n  }, []);\n  const advanceDebatePhase = () => {\n    setDebateState(prev => {\n      switch (prev) {\n        case 'opening':\n          return 'rebuttal';\n        case 'rebuttal':\n          return 'counterargument';\n        case 'counterargument':\n          return 'closing';\n        default:\n          return 'closing';\n      }\n    });\n    setCurrentRound(prev => prev + 1);\n  };\n  const clearWordAnimation = () => {\n    if (animationRef.current) {\n      clearInterval(animationRef.current);\n      animationRef.current = null;\n    }\n    setIsAnimating(false);\n    setCurrentWordIndex(0);\n  };\n  const startWordAnimation = (text, durationMs = 4000) => {\n    clearWordAnimation();\n    const sanitized = stripPauseTokens(text);\n    const words = sanitized.split(' ').filter(Boolean);\n    if (!words.length) {\n      return;\n    }\n    setIsAnimating(true);\n    setCurrentWordIndex(0);\n    const interval = Math.max(durationMs / words.length, 80);\n    let index = 0;\n    animationRef.current = setInterval(() => {\n      index += 1;\n      setCurrentWordIndex(current => index < words.length ? index : current);\n      if (index >= words.length) {\n        clearWordAnimation();\n      }\n    }, interval);\n  };\n  const startDebate = async () => {\n    if (!motion.trim()) {\n      alert('Please enter a debate motion before starting.');\n      return;\n    }\n    try {\n      resetLocalSession();\n      const response = await axios.post(`${API_BASE}/start`, {\n        motion: motion.trim(),\n        side,\n        timeLimit\n      });\n      setAssignedSide(response.data.assignedSide);\n      setDebateStarted(true);\n      setDebateState('opening');\n      setCurrentRound(1);\n      if (response.data.aiText) {\n        const aiData = JSON.parse(response.data.aiText);\n        setTurns([{\n          speaker: 'ai',\n          text: aiData.text,\n          data: aiData,\n          round: 1,\n          state: 'opening'\n        }]);\n        setCurrentSpeaker('ai');\n        await speak(aiData.text);\n      } else {\n        setCurrentSpeaker('user');\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Start debate error:', error);\n      alert('Failed to start debate: ' + (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || error.message));\n    }\n  };\n  const record = async () => {\n    if (recording || aiSpeaking || currentSpeaker !== 'user') {\n      return;\n    }\n    if (activeAudioRef.current) {\n      activeAudioRef.current.pause();\n      activeAudioRef.current = null;\n    }\n    window.speechSynthesis.cancel();\n    clearWordAnimation();\n    setAiSpeaking(false);\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true\n      });\n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType: 'audio/webm'\n      });\n      recorderRef.current = mediaRecorder;\n      const chunks = [];\n      mediaRecorder.ondataavailable = event => {\n        if (event.data && event.data.size > 0) {\n          chunks.push(event.data);\n        }\n      };\n      mediaRecorder.onstop = () => {\n        stream.getTracks().forEach(track => track.stop());\n        if (timerRef.current) {\n          clearInterval(timerRef.current);\n          timerRef.current = null;\n        }\n        setRecording(false);\n        setRecordingTime(0);\n        recorderRef.current = null;\n        if (chunks.length > 0) {\n          const blob = new Blob(chunks, {\n            type: 'audio/webm'\n          });\n          setAudioBlob(blob);\n        }\n      };\n      mediaRecorder.start();\n      setRecording(true);\n      setRecordingTime(0);\n      timerRef.current = setInterval(() => {\n        setRecordingTime(prev => {\n          const nextTime = prev + 1;\n          if (nextTime >= timeLimit * 60) {\n            stopRecord();\n            alert('Time limit reached! Recording stopped.');\n            return prev;\n          }\n          return nextTime;\n        });\n      }, 1000);\n    } catch (error) {\n      console.error('Microphone access error:', error);\n      alert('Could not access microphone. Please allow microphone permissions and try again.');\n    }\n  };\n  const stopRecord = () => {\n    const recorder = recorderRef.current;\n    if (!recorder || recorder.state === 'inactive') {\n      return;\n    }\n    recorder.stop();\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n  };\n  useEffect(() => {\n    if (!audioBlob) {\n      return;\n    }\n    processRecording(audioBlob);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [audioBlob]);\n  const processRecording = async blob => {\n    const userBlob = blob;\n    setAudioBlob(null);\n    setCurrentSpeaker('ai');\n    try {\n      const fileName = `user-turn-${Date.now()}.webm`;\n      const formData = new FormData();\n      formData.append('file', userBlob, fileName);\n      const {\n        data\n      } = await axios.post(`${API_BASE}/transcribe`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      const userText = (data.transcript || '').trim() || '[No speech detected]';\n      const objectUrl = URL.createObjectURL(userBlob);\n      audioUrlsRef.current.push(objectUrl);\n      const timestamp = new Date().toISOString();\n      const userTurn = {\n        speaker: 'user',\n        text: userText,\n        audioUrl: objectUrl,\n        round: currentRound,\n        state: debateState,\n        timestamp\n      };\n      setTurns(prev => [...prev, userTurn]);\n      const aiResponse = await axios.post(`${API_BASE}/reply`, {\n        userText,\n        round: currentRound,\n        state: debateState,\n        transcript: userText\n      });\n      const aiData = JSON.parse(aiResponse.data.text);\n      const aiTurn = {\n        speaker: 'ai',\n        text: aiData.text,\n        data: aiData,\n        round: currentRound,\n        state: debateState,\n        timestamp: new Date().toISOString()\n      };\n      setTurns(prev => [...prev, aiTurn]);\n      await speak(aiData.text);\n      advanceDebatePhase();\n    } catch (error) {\n      console.error('Recording or transcription failed:', error);\n      alert('Recording or transcription failed. Please try again.');\n      setCurrentSpeaker('user');\n    }\n  };\n  const playRemoteAudio = (url, text) => new Promise(resolve => {\n    clearWordAnimation();\n    const audio = new Audio(`${url}?v=${Date.now()}`);\n    activeAudioRef.current = audio;\n    audio.onloadedmetadata = () => {\n      const duration = (audio.duration || 5) * 1000 * HIGHLIGHT_STRETCH;\n      startWordAnimation(stripPauseTokens(text), duration);\n    };\n    audio.onerror = () => {\n      activeAudioRef.current = null;\n      resolve();\n    };\n    audio.onended = () => {\n      activeAudioRef.current = null;\n      resolve();\n    };\n    audio.play().catch(() => {\n      activeAudioRef.current = null;\n      resolve();\n    });\n  });\n  const speakWithBrowserTts = text => new Promise(resolve => {\n    const cleanTimingText = stripPauseTokens(text);\n    if (!text || !cleanTimingText) {\n      resolve();\n      return;\n    }\n    if (!window.speechSynthesis) {\n      resolve();\n      return;\n    }\n    window.speechSynthesis.cancel();\n    clearWordAnimation();\n    const vocalText = expandPauseTokensForSpeech(text);\n    const utterance = new SpeechSynthesisUtterance(vocalText);\n    utterance.rate = 1.28;\n    utterance.pitch = 1.05;\n    utterance.volume = 0.9;\n    const voices = window.speechSynthesis.getVoices();\n    const preferredVoice = voices.find(voice => voice.lang.startsWith('en'));\n    if (preferredVoice) {\n      utterance.voice = preferredVoice;\n    }\n    utterance.onend = () => {\n      utteranceRef.current = null;\n      resolve();\n    };\n    utterance.onerror = () => {\n      utteranceRef.current = null;\n      resolve();\n    };\n    utteranceRef.current = utterance;\n    const estimatedDuration = Math.max(cleanTimingText.split(' ').length * 420, 1400) * HIGHLIGHT_STRETCH;\n    startWordAnimation(cleanTimingText, estimatedDuration);\n    window.speechSynthesis.speak(utterance);\n  });\n  const speak = async payload => {\n    const speechText = typeof payload === 'string' ? payload : (payload === null || payload === void 0 ? void 0 : payload.text) || '';\n    if (!speechText) {\n      return;\n    }\n    setAiSpeaking(true);\n    setCurrentSpeaker('ai');\n    setCurrentWordIndex(0);\n    try {\n      const {\n        data\n      } = await axios.post(`${API_BASE}/speak`, {\n        text: speechText\n      });\n      const playbackText = (data.textForSpeech || data.text || speechText).trim();\n      if (data.type === 'file' && data.audioUrl) {\n        await playRemoteAudio(`${API_BASE}${data.audioUrl}`, playbackText);\n      } else {\n        await speakWithBrowserTts(playbackText);\n      }\n    } catch (error) {\n      console.error('TTS failed:', error);\n      await speakWithBrowserTts(speechText);\n    } finally {\n      clearWordAnimation();\n      setAiSpeaking(false);\n      setCurrentSpeaker('user');\n    }\n  };\n  const renderAnimatedText = (text, isActive) => {\n    const clean = stripPauseTokens(text);\n    if (!isActive || !isAnimating) {\n      return clean || text || '';\n    }\n    if (!clean) return '';\n    const words = clean.split(' ');\n    return words.map((word, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n      className: index <= currentWordIndex ? 'highlight' : '',\n      children: [word, ' ']\n    }, `${word}-${index}`, true, {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 7\n    }, this));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"AI Debate Partner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"setup-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Debate Motion\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: motion,\n            onChange: e => setMotion(e.target.value),\n            placeholder: \"Enter your debate topic...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Your Side\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: side,\n            onChange: e => setSide(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"auto\",\n              children: \"Auto Assign Side\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"pro\",\n              children: \"Proposition\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"opp\",\n              children: \"Opposition\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Speech Time Limit (minutes)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: timeLimit,\n            onChange: e => setTimeLimit(parseInt(e.target.value)),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: 3,\n              children: \"3 minutes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 421,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: 5,\n              children: \"5 minutes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: 7,\n              children: \"7 minutes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: 10,\n              children: \"10 minutes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"start-button\",\n          onClick: startDebate,\n          children: \"Start Debate\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 7\n    }, this), debateStarted && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"debate-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Motion\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: motion\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Your Side\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: side === 'auto' ? assignedSide === 'pro' ? 'Proposition' : 'Opposition' : side === 'pro' ? 'Proposition' : 'Opposition'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Speech Time Limit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [timeLimit, \" minutes\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat\",\n        children: [turns.map((turn, i) => {\n          const isLatestAI = turn.speaker === 'ai' && i === turns.length - 1;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `turn ${turn.speaker}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"speaker-indicator\",\n              children: turn.speaker === 'ai' ? 'AI' : 'You'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 456,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: isLatestAI && isAnimating ? 'animated-text' : '',\n              children: renderAnimatedText(turn.text, isLatestAI)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 17\n            }, this), turn.speaker === 'user' && turn.audioUrl && /*#__PURE__*/_jsxDEV(\"audio\", {\n              controls: true,\n              src: turn.audioUrl,\n              \"aria-label\": \"Your recorded reply\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 19\n            }, this)]\n          }, `${turn.speaker}-${i}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 15\n          }, this);\n        }), aiSpeaking && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ai-speaking\",\n          children: \"AI is speaking...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 26\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"controls\",\n      children: [currentSpeaker === 'user' && !aiSpeaking && !debateStarted && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"instruction-message\",\n        children: \"Press the \\\"Record Response\\\" button to start recording your speech.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 11\n      }, this), currentSpeaker === 'user' && !aiSpeaking && debateStarted && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"turn-indicator\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Your Turn - \", debateState.charAt(0).toUpperCase() + debateState.slice(1), \" Speech\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Round \", currentRound, \" | Time Limit: \", timeLimit, \" minutes\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `record-button ${recording ? 'recording' : ''}`,\n          onClick: record,\n          disabled: recording,\n          children: recording ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"Recording (\", Math.floor(recordingTime / 60), \":\", (recordingTime % 60).toString().padStart(2, '0'), \")\", /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"audio-visualizer\",\n              \"aria-hidden\": \"true\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"audio-bar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 493,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"audio-bar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 494,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"audio-bar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"audio-bar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"audio-bar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true) : 'Record Response'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"stop-button\",\n          onClick: stopRecord,\n          disabled: !recording,\n          children: \"Stop & Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), currentSpeaker === 'ai' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"waiting-message\",\n        children: \"AI is preparing its response...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 37\n      }, this), aiSpeaking && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"waiting-message\",\n        children: \"AI is speaking...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 24\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 398,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"N/Yaf8fGWgo3g1/l+06vsEAp8vk=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","API_BASE","process","env","REACT_APP_API_BASE","motion","setMotion","side","setSide","timeLimit","setTimeLimit","turns","setTurns","recording","setRecording","audioBlob","setAudioBlob","aiSpeaking","setAiSpeaking","assignedSide","setAssignedSide","currentSpeaker","setCurrentSpeaker","debateStarted","setDebateStarted","recordingTime","setRecordingTime","currentWordIndex","setCurrentWordIndex","isAnimating","setIsAnimating","debateState","setDebateState","currentRound","setCurrentRound","recorderRef","timerRef","audioUrlsRef","activeAudioRef","utteranceRef","animationRef","HIGHLIGHT_STRETCH","stripPauseTokens","text","replace","trim","expandPauseTokensForSpeech","resetLocalSession","current","clearInterval","pause","window","speechSynthesis","cancel","forEach","url","URL","revokeObjectURL","advanceDebatePhase","prev","clearWordAnimation","startWordAnimation","durationMs","sanitized","words","split","filter","Boolean","length","interval","Math","max","index","setInterval","startDebate","alert","response","post","data","aiText","aiData","JSON","parse","speaker","round","state","speak","error","_error$response","_error$response$data","console","message","record","stream","navigator","mediaDevices","getUserMedia","audio","mediaRecorder","MediaRecorder","mimeType","chunks","ondataavailable","event","size","push","onstop","getTracks","track","stop","blob","Blob","type","start","nextTime","stopRecord","recorder","processRecording","userBlob","fileName","Date","now","formData","FormData","append","headers","userText","transcript","objectUrl","createObjectURL","timestamp","toISOString","userTurn","audioUrl","aiResponse","aiTurn","playRemoteAudio","Promise","resolve","Audio","onloadedmetadata","duration","onerror","onended","play","catch","speakWithBrowserTts","cleanTimingText","vocalText","utterance","SpeechSynthesisUtterance","rate","pitch","volume","voices","getVoices","preferredVoice","find","voice","lang","startsWith","onend","estimatedDuration","payload","speechText","playbackText","textForSpeech","renderAnimatedText","isActive","clean","map","word","className","children","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","placeholder","parseInt","onClick","turn","i","isLatestAI","controls","src","charAt","toUpperCase","slice","disabled","floor","toString","padStart","_c","$RefreshReg$"],"sources":["C:/Users/DEEPAK AGARWAL/Downloads/Claude Code Trial/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport './App.css';\r\n\r\nfunction App() {\n  const API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:3001';\n\r\n  const [motion, setMotion] = useState('');\r\n  const [side, setSide] = useState('auto');\r\n  const [timeLimit, setTimeLimit] = useState(5); // in minutes\r\n  const [turns, setTurns] = useState([]);\r\n  const [recording, setRecording] = useState(false);\r\n  const [audioBlob, setAudioBlob] = useState(null);\r\n  const [aiSpeaking, setAiSpeaking] = useState(false);\r\n  const [assignedSide, setAssignedSide] = useState(null);\r\n  const [currentSpeaker, setCurrentSpeaker] = useState(null);\r\n  const [debateStarted, setDebateStarted] = useState(false);\r\n  const [recordingTime, setRecordingTime] = useState(0);\r\n  const [currentWordIndex, setCurrentWordIndex] = useState(0);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n  const [debateState, setDebateState] = useState('opening'); // opening, rebuttal, counterargument, closing\r\n  const [currentRound, setCurrentRound] = useState(1);\r\n\r\n  const recorderRef = useRef(null);\r\n  const timerRef = useRef(null);\r\n  const audioUrlsRef = useRef([]);\n  const activeAudioRef = useRef(null);\n  const utteranceRef = useRef(null);\n  const animationRef = useRef(null);\n\n  const HIGHLIGHT_STRETCH = 1.2;\n\n  const stripPauseTokens = (text = '') =>\n    text\n      .replace(/\\[\\[PAUSE_LONG\\]\\]/g, ' ')\n      .replace(/\\[\\[PAUSE_SHORT\\]\\]/g, ' ')\n      .replace(/\\s{2,}/g, ' ')\n      .trim();\n\n  const expandPauseTokensForSpeech = (text = '') =>\n    text\n      .replace(/\\[\\[PAUSE_LONG\\]\\]/g, '. . . ')\n      .replace(/\\[\\[PAUSE_SHORT\\]\\]/g, ', ')\n      .replace(/\\s{2,}/g, ' ')\n      .trim();\n\r\n  const resetLocalSession = () => {\r\n    if (timerRef.current) {\r\n      clearInterval(timerRef.current);\r\n      timerRef.current = null;\r\n    }\r\n    if (activeAudioRef.current) {\r\n      activeAudioRef.current.pause();\r\n      activeAudioRef.current = null;\r\n    }\r\n    window.speechSynthesis.cancel();\r\n    audioUrlsRef.current.forEach(url => URL.revokeObjectURL(url));\r\n    audioUrlsRef.current = [];\r\n    setTurns([]);\r\n    setRecording(false);\r\n    setRecordingTime(0);\r\n    setAiSpeaking(false);\r\n    setCurrentSpeaker(null);\r\n    setCurrentRound(1);\r\n    setDebateState('opening');\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (timerRef.current) {\r\n        clearInterval(timerRef.current);\r\n      }\r\n      if (activeAudioRef.current) {\r\n        activeAudioRef.current.pause();\r\n      }\r\n      window.speechSynthesis.cancel();\r\n      audioUrlsRef.current.forEach(url => URL.revokeObjectURL(url));\r\n      audioUrlsRef.current = [];\r\n    };\r\n  }, []);\r\n\r\n  const advanceDebatePhase = () => {\r\n    setDebateState(prev => {\r\n      switch (prev) {\r\n        case 'opening':\r\n          return 'rebuttal';\r\n        case 'rebuttal':\r\n          return 'counterargument';\r\n        case 'counterargument':\r\n          return 'closing';\r\n        default:\r\n          return 'closing';\r\n      }\r\n    });\r\n    setCurrentRound(prev => prev + 1);\r\n  };\r\n\r\n  const clearWordAnimation = () => {\r\n    if (animationRef.current) {\r\n      clearInterval(animationRef.current);\r\n      animationRef.current = null;\r\n    }\r\n    setIsAnimating(false);\r\n    setCurrentWordIndex(0);\r\n  };\r\n\r\n  const startWordAnimation = (text, durationMs = 4000) => {\n    clearWordAnimation();\n    const sanitized = stripPauseTokens(text);\n    const words = sanitized.split(' ').filter(Boolean);\n    if (!words.length) {\n      return;\n    }\n    setIsAnimating(true);\r\n    setCurrentWordIndex(0);\r\n    const interval = Math.max(durationMs / words.length, 80);\r\n    let index = 0;\r\n    animationRef.current = setInterval(() => {\r\n      index += 1;\r\n      setCurrentWordIndex(current => (index < words.length ? index : current));\r\n      if (index >= words.length) {\r\n        clearWordAnimation();\r\n      }\r\n    }, interval);\r\n  };\r\n\r\n  const startDebate = async () => {\r\n    if (!motion.trim()) {\r\n      alert('Please enter a debate motion before starting.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      resetLocalSession();\r\n      const response = await axios.post(`${API_BASE}/start`, { motion: motion.trim(), side, timeLimit });\r\n      setAssignedSide(response.data.assignedSide);\r\n      setDebateStarted(true);\r\n      setDebateState('opening');\r\n      setCurrentRound(1);\r\n\r\n      if (response.data.aiText) {\r\n        const aiData = JSON.parse(response.data.aiText);\r\n        setTurns([{ speaker: 'ai', text: aiData.text, data: aiData, round: 1, state: 'opening' }]);\r\n        setCurrentSpeaker('ai');\r\n        await speak(aiData.text);\r\n      } else {\r\n        setCurrentSpeaker('user');\r\n      }\r\n    } catch (error) {\r\n      console.error('Start debate error:', error);\r\n      alert('Failed to start debate: ' + (error.response?.data?.error || error.message));\r\n    }\r\n  };\r\n\r\n  const record = async () => {\n    if (recording || aiSpeaking || currentSpeaker !== 'user') {\n      return;\n    }\n\n    if (activeAudioRef.current) {\n      activeAudioRef.current.pause();\n      activeAudioRef.current = null;\n    }\n    window.speechSynthesis.cancel();\n    clearWordAnimation();\n    setAiSpeaking(false);\n\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      const mediaRecorder = new MediaRecorder(stream, { mimeType: 'audio/webm' });\r\n      recorderRef.current = mediaRecorder;\r\n      const chunks = [];\r\n\r\n      mediaRecorder.ondataavailable = event => {\r\n        if (event.data && event.data.size > 0) {\r\n          chunks.push(event.data);\r\n        }\r\n      };\r\n\r\n      mediaRecorder.onstop = () => {\r\n        stream.getTracks().forEach(track => track.stop());\r\n        if (timerRef.current) {\r\n          clearInterval(timerRef.current);\r\n          timerRef.current = null;\r\n        }\r\n        setRecording(false);\r\n        setRecordingTime(0);\r\n        recorderRef.current = null;\r\n        if (chunks.length > 0) {\r\n          const blob = new Blob(chunks, { type: 'audio/webm' });\r\n          setAudioBlob(blob);\r\n        }\r\n      };\r\n\r\n      mediaRecorder.start();\n      setRecording(true);\r\n      setRecordingTime(0);\r\n\r\n      timerRef.current = setInterval(() => {\r\n        setRecordingTime(prev => {\r\n          const nextTime = prev + 1;\r\n          if (nextTime >= timeLimit * 60) {\r\n            stopRecord();\r\n            alert('Time limit reached! Recording stopped.');\r\n            return prev;\r\n          }\r\n          return nextTime;\r\n        });\r\n      }, 1000);\r\n    } catch (error) {\r\n      console.error('Microphone access error:', error);\r\n      alert('Could not access microphone. Please allow microphone permissions and try again.');\n    }\n  };\n\n  const stopRecord = () => {\n    const recorder = recorderRef.current;\n    if (!recorder || recorder.state === 'inactive') {\n      return;\n    }\n    recorder.stop();\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n  };\n\n  useEffect(() => {\n    if (!audioBlob) {\n      return;\n    }\n    processRecording(audioBlob);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [audioBlob]);\n\n  const processRecording = async blob => {\n    const userBlob = blob;\n    setAudioBlob(null);\n    setCurrentSpeaker('ai');\n\n    try {\n      const fileName = `user-turn-${Date.now()}.webm`;\n      const formData = new FormData();\n      formData.append('file', userBlob, fileName);\n      const { data } = await axios.post(`${API_BASE}/transcribe`, formData, {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      });\n\n      const userText = (data.transcript || '').trim() || '[No speech detected]';\n      const objectUrl = URL.createObjectURL(userBlob);\n      audioUrlsRef.current.push(objectUrl);\n\n      const timestamp = new Date().toISOString();\n      const userTurn = {\n        speaker: 'user',\n        text: userText,\n        audioUrl: objectUrl,\n        round: currentRound,\n        state: debateState,\n        timestamp\n      };\n\n      setTurns(prev => [...prev, userTurn]);\n\n      const aiResponse = await axios.post(`${API_BASE}/reply`, {\n        userText,\n        round: currentRound,\n        state: debateState,\n        transcript: userText\n      });\n\n      const aiData = JSON.parse(aiResponse.data.text);\n      const aiTurn = {\n        speaker: 'ai',\n        text: aiData.text,\n        data: aiData,\n        round: currentRound,\n        state: debateState,\n        timestamp: new Date().toISOString()\n      };\n      setTurns(prev => [...prev, aiTurn]);\n      await speak(aiData.text);\n      advanceDebatePhase();\n    } catch (error) {\n      console.error('Recording or transcription failed:', error);\n      alert('Recording or transcription failed. Please try again.');\n      setCurrentSpeaker('user');\n    }\n  };\n\r\n  const playRemoteAudio = (url, text) =>\n    new Promise(resolve => {\n      clearWordAnimation();\n      const audio = new Audio(`${url}?v=${Date.now()}`);\n      activeAudioRef.current = audio;\n\n      audio.onloadedmetadata = () => {\n        const duration = (audio.duration || 5) * 1000 * HIGHLIGHT_STRETCH;\n        startWordAnimation(stripPauseTokens(text), duration);\n      };\n\r\n      audio.onerror = () => {\r\n        activeAudioRef.current = null;\r\n        resolve();\r\n      };\r\n\r\n      audio.onended = () => {\r\n        activeAudioRef.current = null;\r\n        resolve();\r\n      };\r\n\r\n      audio.play().catch(() => {\r\n        activeAudioRef.current = null;\r\n        resolve();\r\n      });\r\n    });\r\n\r\n  const speakWithBrowserTts = text =>\n    new Promise(resolve => {\n      const cleanTimingText = stripPauseTokens(text);\n      if (!text || !cleanTimingText) {\n        resolve();\n        return;\n      }\n      if (!window.speechSynthesis) {\n        resolve();\n        return;\n      }\n      window.speechSynthesis.cancel();\n      clearWordAnimation();\n      const vocalText = expandPauseTokensForSpeech(text);\n      const utterance = new SpeechSynthesisUtterance(vocalText);\n      utterance.rate = 1.28;\n      utterance.pitch = 1.05;\n      utterance.volume = 0.9;\n      const voices = window.speechSynthesis.getVoices();\n      const preferredVoice = voices.find(voice => voice.lang.startsWith('en'));\n      if (preferredVoice) {\n        utterance.voice = preferredVoice;\n      }\r\n      utterance.onend = () => {\r\n        utteranceRef.current = null;\r\n        resolve();\r\n      };\r\n      utterance.onerror = () => {\n        utteranceRef.current = null;\n        resolve();\n      };\n      utteranceRef.current = utterance;\n      const estimatedDuration = Math.max(cleanTimingText.split(' ').length * 420, 1400) * HIGHLIGHT_STRETCH;\n      startWordAnimation(cleanTimingText, estimatedDuration);\n      window.speechSynthesis.speak(utterance);\n    });\n\r\n  const speak = async payload => {\r\n    const speechText = typeof payload === 'string' ? payload : payload?.text || '';\r\n    if (!speechText) {\r\n      return;\r\n    }\r\n\r\n    setAiSpeaking(true);\r\n    setCurrentSpeaker('ai');\r\n    setCurrentWordIndex(0);\r\n\r\n    try {\r\n      const { data } = await axios.post(`${API_BASE}/speak`, { text: speechText });\r\n      const playbackText = (data.textForSpeech || data.text || speechText).trim();\n      if (data.type === 'file' && data.audioUrl) {\n        await playRemoteAudio(`${API_BASE}${data.audioUrl}`, playbackText);\n      } else {\n        await speakWithBrowserTts(playbackText);\n      }\n    } catch (error) {\r\n      console.error('TTS failed:', error);\r\n      await speakWithBrowserTts(speechText);\r\n    } finally {\r\n      clearWordAnimation();\r\n      setAiSpeaking(false);\r\n      setCurrentSpeaker('user');\r\n    }\r\n  };\r\n\r\n  const renderAnimatedText = (text, isActive) => {\n    const clean = stripPauseTokens(text);\n    if (!isActive || !isAnimating) {\n      return clean || text || '';\n    }\n    if (!clean) return '';\n    const words = clean.split(' ');\n    return words.map((word, index) => (\r\n      <span key={`${word}-${index}`} className={index <= currentWordIndex ? 'highlight' : ''}>\r\n        {word}{' '}\r\n      </span>\r\n    ));\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"header\">\r\n        <h1>AI Debate Partner</h1>\r\n        <div className=\"setup-panel\">\r\n          <div className=\"form-group\">\r\n            <label>Debate Motion</label>\r\n            <input\r\n              value={motion}\r\n              onChange={e => setMotion(e.target.value)}\r\n              placeholder=\"Enter your debate topic...\"\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Your Side</label>\r\n            <select value={side} onChange={e => setSide(e.target.value)}>\r\n              <option value=\"auto\">Auto Assign Side</option>\r\n              <option value=\"pro\">Proposition</option>\r\n              <option value=\"opp\">Opposition</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Speech Time Limit (minutes)</label>\r\n            <select value={timeLimit} onChange={e => setTimeLimit(parseInt(e.target.value))}>\r\n              <option value={3}>3 minutes</option>\r\n              <option value={5}>5 minutes</option>\r\n              <option value={7}>7 minutes</option>\r\n              <option value={10}>10 minutes</option>\r\n            </select>\r\n          </div>\r\n          <button className=\"start-button\" onClick={startDebate}>Start Debate</button>\r\n        </div>\r\n      </div>\r\n\r\n      {debateStarted && (\r\n        <div className=\"debate-info\">\r\n          <div className=\"info-item\">\r\n            <h3>Motion</h3>\r\n            <p>{motion}</p>\r\n          </div>\r\n          <div className=\"info-item\">\r\n            <h3>Your Side</h3>\r\n            <p>{side === 'auto' ? (assignedSide === 'pro' ? 'Proposition' : 'Opposition') : side === 'pro' ? 'Proposition' : 'Opposition'}</p>\r\n          </div>\r\n          <div className=\"info-item\">\r\n            <h3>Speech Time Limit</h3>\r\n            <p>{timeLimit} minutes</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n\r\n\r\n      <div className=\"chat-container\">\r\n        <div className=\"chat\">\r\n          {turns.map((turn, i) => {\r\n            const isLatestAI = turn.speaker === 'ai' && i === turns.length - 1;\r\n            return (\r\n              <div key={`${turn.speaker}-${i}`} className={`turn ${turn.speaker}`}>\r\n                <div className=\"speaker-indicator\">\r\n                  {turn.speaker === 'ai' ? 'AI' : 'You'}\r\n                </div>\r\n                <p className={isLatestAI && isAnimating ? 'animated-text' : ''}>\n                  {renderAnimatedText(turn.text, isLatestAI)}\n                </p>\r\n                {turn.speaker === 'user' && turn.audioUrl && (\n                  <audio controls src={turn.audioUrl} aria-label=\"Your recorded reply\" />\n                )}\n              </div>\r\n            );\r\n          })}\r\n          {aiSpeaking && <div className=\"ai-speaking\">AI is speaking...</div>}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"controls\">\r\n        {currentSpeaker === 'user' && !aiSpeaking && !debateStarted && (\r\n          <div className=\"instruction-message\">\r\n            Press the \"Record Response\" button to start recording your speech.\r\n          </div>\r\n        )}\r\n        {currentSpeaker === 'user' && !aiSpeaking && debateStarted && (\r\n          <>\r\n            <div className=\"turn-indicator\">\r\n              <h3>Your Turn - {debateState.charAt(0).toUpperCase() + debateState.slice(1)} Speech</h3>\r\n              <p>Round {currentRound} | Time Limit: {timeLimit} minutes</p>\r\n            </div>\r\n            <button\r\n              className={`record-button ${recording ? 'recording' : ''}`}\r\n              onClick={record}\r\n              disabled={recording}\r\n            >\r\n              {recording ? (\r\n                <>\r\n                  Recording ({Math.floor(recordingTime / 60)}:{(recordingTime % 60).toString().padStart(2, '0')})\r\n                  <div className=\"audio-visualizer\" aria-hidden=\"true\">\r\n                    <div className=\"audio-bar\"></div>\r\n                    <div className=\"audio-bar\"></div>\r\n                    <div className=\"audio-bar\"></div>\r\n                    <div className=\"audio-bar\"></div>\r\n                    <div className=\"audio-bar\"></div>\r\n                  </div>\r\n                </>\r\n              ) : (\r\n                'Record Response'\r\n              )}\r\n            </button>\r\n            <button className=\"stop-button\" onClick={stopRecord} disabled={!recording}>\r\n              Stop &amp; Submit\r\n            </button>\r\n          </>\r\n        )}\r\n        {currentSpeaker === 'ai' && <div className=\"waiting-message\">AI is preparing its response...</div>}\r\n        {aiSpeaking && <div className=\"waiting-message\">AI is speaking...</div>}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}